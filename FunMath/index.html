<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidzPaper - Emoji Math Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C5CE7; 
            --primary-dark: #4834D4;
            --accent: #55EFC4; 
            --accent-dark: #00B894;
            --bg-dark: #0F172A;
            --sidebar-bg: #1E293B;
            --sidebar-text: #F1F5F9;
            --input-bg: #334155;
            --card-bg: #FFFFFF;
            --text-main: #1E293B;
            --emoji-size: 30px; 
        }

        [data-theme="sunset"] { --primary: #FD9644; --primary-dark: #FA8231; --accent: #26DEAD; }
        [data-theme="neon"] { --primary: #A29BFE; --primary-dark: #6C5CE7; --accent: #FD79A8; }
        [data-theme="berry"] { --primary: #EF5777; --primary-dark: #D4145A; --accent: #70A1FF; }

        * { box-sizing: border-box; -webkit-print-color-adjust: exact; }
        
        body {
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-dark);
            display: flex;
            height: 100vh;
            overflow: hidden;
            color: var(--sidebar-text);
        }

        .bg-decor {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.1;
        }

        /* Sidebar - Fixed Right */
        .sidebar {
            width: 420px;
            background: var(--sidebar-bg);
            padding: 25px;
            box-shadow: -20px 0 50px rgba(0,0,0,0.5);
            z-index: 100;
            overflow-y: auto;
            border-left: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar h1 {
            font-family: 'Fredoka One', cursive;
            color: #FFFFFF;
            font-size: 26px;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 
                0 1px 0 #ccc, 0 2px 0 #bbb, 0 3px 0 #aaa,
                0 6px 1px rgba(0,0,0,0.2), 0 0 5px rgba(255,255,255,0.3);
        }

        .section-title {
            font-size: 11px;
            font-weight: 800;
            color: var(--accent);
            text-transform: uppercase;
            margin: 20px 0 10px 0;
            letter-spacing: 2px;
            border-bottom: 1px solid var(--input-bg);
            padding-bottom: 5px;
        }

        .control-group { margin-bottom: 15px; }
        .control-group label {
            display: block;
            font-weight: 700;
            margin-bottom: 6px;
            font-size: 12px;
            color: #94A3B8;
        }

        select, input {
            width: 100%;
            padding: 10px 14px;
            border-radius: 12px;
            border: 2px solid transparent;
            background: var(--input-bg);
            color: white;
            font-family: inherit;
            font-weight: 600;
            outline: none;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-family: 'Fredoka One', cursive;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: white;
            background: var(--primary);
            box-shadow: 0 6px 0 var(--primary-dark);
        }

        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 var(--primary-dark); }
        .btn-print { background: var(--accent); color: #0F172A; box-shadow: 0 6px 0 #00B894; }

        /* Preview Area */
        .preview-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 40px;
            overflow-y: auto;
            z-index: 10;
        }

        .worksheet-a4 {
            width: 210mm;
            min-height: 297mm;
            background: white;
            padding: 15mm 20mm;
            box-shadow: 0 0 60px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            color: #1E293B;
            position: relative;
        }

        .ws-header { text-align: center; margin-bottom: 15px; flex-shrink: 0; }
        .ws-title {
            font-family: 'Fredoka One', cursive;
            font-size: 40px;
            color: var(--primary);
            margin: 0;
            filter: drop-shadow(4px 4px 0 rgba(0,0,0,0.1));
        }

        .ws-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-weight: 700;
            color: #64748B;
            border-bottom: 3px dotted #E2E8F0;
            padding-bottom: 8px;
        }

        .questions-container { 
            display: flex; 
            flex-direction: column; 
            gap: 12px; 
            flex-grow: 1; 
            margin-top: 15px;
        }

        .q-card {
            background: #F8FAFC;
            border-radius: 18px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            border: 2px solid #F1F5F9;
            box-shadow: 0 4px 8px rgba(0,0,0,0.02), inset 0 -3px 0 rgba(0,0,0,0.05);
            page-break-inside: avoid; /* Essential for printing */
        }

        .q-num {
            font-family: 'Fredoka One', cursive;
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 13px;
            box-shadow: 0 3px 0 var(--primary-dark);
            flex-shrink: 0;
        }

        .math-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
        }

        .emoji-group {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            padding: 6px;
            border-radius: 12px;
            background: white;
            min-width: 140px;
            max-width: 220px;
            justify-content: center;
            align-content: center;
            box-shadow: inset 0 3px 6px rgba(0,0,0,0.04);
            min-height: 50px;
            font-size: var(--emoji-size);
            line-height: 1.1;
            text-align: center;
        }

        .emoji-item {
            display: inline-block;
            margin: 1px;
            vertical-align: middle;
        }

        .op-text {
            font-family: 'Fredoka One', cursive;
            font-size: 28px;
            color: var(--primary);
            flex-shrink: 0;
        }

        .ans-box {
            width: 60px;
            height: 60px;
            border: 3px solid var(--primary);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Fredoka One', cursive;
            font-size: 24px;
            color: var(--primary-dark);
            background: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            flex-shrink: 0;
        }

        .ans-val { visibility: hidden; }
        .show-sol .ans-val { visibility: visible; }

        .ws-footer {
            text-align: center;
            padding: 20px 0;
            font-weight: 800;
            color: #CBD5E1;
            font-size: 11px;
            letter-spacing: 1.2px;
            flex-shrink: 0;
            margin-top: auto; /* Pushes to bottom */
        }

        @media print {
            @page { size: A4; margin: 0; }
            body { background: white; height: auto; overflow: visible; }
            .sidebar, .bg-decor { display: none !important; }
            .preview-area { padding: 0; overflow: visible; display: block; }
            .worksheet-a4 { 
                box-shadow: none !important; 
                width: 210mm; 
                height: auto; 
                min-height: 297mm;
                padding: 15mm; 
                margin: 0 auto;
                display: block; /* Allows natural content flow */
                overflow: visible;
            }
            .ws-header, .ws-meta, .questions-container, .ws-footer { display: block; }
            .questions-container { gap: 10px; margin-bottom: 20px; }
            .ws-footer { margin-top: 40px; page-break-after: avoid; }
        }

        .rtl { direction: rtl; }
    </style>
</head>
<body>

    <svg class="bg-decor" xmlns="http://www.w3.org/2000/svg">
        <circle cx="10%" cy="20%" r="80" fill="var(--primary)" />
        <rect x="85%" y="15%" width="100" height="100" rx="20" fill="var(--accent)" transform="rotate(25)" />
        <circle cx="50%" cy="85%" r="100" fill="var(--primary)" />
    </svg>

    <main class="preview-area">
        <div class="worksheet-a4" id="ws">
            <div class="ws-header">
                <h2 class="ws-title" id="outTitle">Emoji Math Practice</h2>
                <div class="ws-meta">
                    <span id="outName">NAME: _________________</span>
                    <span id="outClass">CLASS: _________________</span>
                </div>
            </div>

            <div class="questions-container" id="qList"></div>

            <div class="ws-footer" id="outFooter">
                ¬© 2026 PREMIUM KIDS CONTENT ‚Ä¢ ALL RIGHTS RESERVED
            </div>
        </div>
    </main>

    <aside class="sidebar">
        <h1>üî¢ MATH EMOJI</h1>

        <div class="section-title">Language & UI</div>
        <div class="control-group">
            <label>Language</label>
            <select id="langSelect" onchange="applyLang()">
                <option value="en">English</option>
                <option value="es">Espa√±ol (Spanish)</option>
                <option value="fr">Fran√ßais (French)</option>
                <option value="de">Deutsch (German)</option>
                <option value="it">Italiano (Italian)</option>
                <option value="pt">Portugu√™s (Portuguese)</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
                <option value="zh">‰∏≠Êñá (Chinese)</option>
                <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
                <option value="ko">ÌïúÍµ≠Ïñ¥ (Korean)</option>
                <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                <option value="id">Bahasa Indonesia</option>
                <option value="tr">T√ºrk√ße (Turkish)</option>
                <option value="vi">Ti·∫øng Vi·ªát (Vietnamese)</option>
                <option value="nl">Nederlands (Dutch)</option>
            </select>
        </div>

        <div class="control-group">
            <label>Emoji Size (Zoom)</label>
            <select id="emojiZoom" onchange="applyZoom()">
                <option value="18px">Smallest</option>
                <option value="24px">Small</option>
                <option value="30px" selected>Medium</option>
                <option value="38px">Large</option>
                <option value="46px">Extra Large</option>
            </select>
        </div>

        <div class="section-title">Question Config</div>
        <div class="control-group">
            <label>Math Mode</label>
            <select id="mathMode" onchange="generate()">
                <option value="add">Addition only (+)</option>
                <option value="sub">Subtraction only (-)</option>
                <option value="mixed">Mixed Challenge (+ & -)</option>
            </select>
        </div>
        <div class="control-group">
            <label>Question Count: <span id="qCountVal">8</span></label>
            <input type="range" id="qCount" min="1" max="25" value="8" oninput="document.getElementById('qCountVal').innerText=this.value; generate();">
        </div>
        <div class="control-group">
            <label>Range (Max Number)</label>
            <select id="numRange" onchange="generate()">
                <option value="5">Easy (1-5)</option>
                <option value="10" selected>Junior (1-10)</option>
                <option value="20">Expert (1-20)</option>
            </select>
        </div>

        <div class="section-title">Themes & Emojis</div>
        <div class="control-group">
            <label>Object Theme</label>
            <select id="themeSelect" onchange="generate()">
                <option value="sports">Sports ‚öΩüèÄüéæ</option>
                <option value="school">School üé®‚úèÔ∏èüìö</option>
                <option value="home">Home üè†üõãÔ∏èüß∏</option>
                <option value="plants">Plants & Flowers üåµüå∏üåª</option>
                <option value="wild">Wild Animals ü¶ÅüêØüêò</option>
                <option value="space">Space üöÄü™ê‚≠ê</option>
                <option value="food">Delicious Food üçïüç¶üçì</option>
            </select>
        </div>
        <div class="control-group">
            <label>Custom Emoji (Override Theme)</label>
            <input type="text" id="customEmoji" placeholder="e.g. ü¶Ñ" maxlength="2" oninput="generate()">
        </div>

        <div class="section-title">Visual Styling</div>
        <div class="control-group">
            <label>Color Palette</label>
            <select onchange="document.body.setAttribute('data-theme', this.value)">
                <option value="default">Galaxy Grape (Standard)</option>
                <option value="sunset">Sunset Glow</option>
                <option value="neon">Neon Candy</option>
                <option value="berry">Berry Blast</option>
            </select>
        </div>

        <div class="section-title">Labels Editor</div>
        <div class="control-group">
            <label>Title</label>
            <input type="text" id="inTitle" value="Emoji Math Practice">
        </div>
        <div class="flex-row" style="display:flex; gap:10px;">
            <div class="control-group"><label>Name Label</label><input type="text" id="inName" value="NAME:"></div>
            <div class="control-group"><label>Class Label</label><input type="text" id="inClass" value="CLASS:"></div>
        </div>
        <div class="control-group">
            <label>Footer Text</label>
            <input type="text" id="inFooter" value="¬© 2026 PREMIUM KIDS CONTENT ‚Ä¢ ALL RIGHTS RESERVED">
        </div>

        <div class="section-title">Actions</div>
        <button class="btn" onclick="generate()">‚ú® Generate New</button>
        <button class="btn" style="background:#475569; box-shadow:0 6px 0 #1e293b;" onclick="document.getElementById('ws').classList.toggle('show-sol')">üí° Toggle Answers</button>
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è Print Worksheet</button>
		<button class="btn btn-print" onclick="saveAsImage()">üíæ Save as Image</button>

    </aside>

    <script>
        const langs = {
            en: { t: "Emoji Math Practice", n: "NAME:", c: "CLASS:", f: "¬© 2026 PREMIUM KIDS CONTENT ‚Ä¢ ALL RIGHTS RESERVED" },
            es: { t: "Pr√°ctica de Matem√°ticas", n: "NOMBRE:", c: "CLASE:", f: "¬© 2026 CONTENIDO PREMIUM ‚Ä¢ RESERVADOS TODOS LOS DERECHOS" },
            fr: { t: "Pratique des Math√©matiques", n: "NOM:", c: "CLASSE:", f: "¬© 2026 CONTENU PREMIUM ‚Ä¢ TOUS DROITS R√âSERV√âS" },
            de: { t: "Mathe-√úbung mit Emojis", n: "NAME:", c: "KLASSE:", f: "¬© 2026 PREMIUM-INHALTE ‚Ä¢ ALLE RECHTE VORBEHALTEN" },
            it: { t: "Esercitazione di Matematica", n: "NOME:", c: "CLASSE:", f: "¬© 2026 CONTENUTI PREMIUM ‚Ä¢ TUTTI I DIRITTI RISERVATI" },
            pt: { t: "Pr√°tica de Matem√°tica", n: "NOME:", c: "TURMA:", f: "¬© 2026 CONTE√öDO PREMIUM ‚Ä¢ TODOS OS DIREITOS RESERVADOS" },
            ru: { t: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞", n: "–ò–ú–Ø:", c: "–ö–õ–ê–°–°:", f: "¬© 2026 –ü–†–ï–ú–ò–£–ú –ö–û–ù–¢–ï–ù–¢ ‚Ä¢ –ü–†–ê–í–ê –ó–ê–©–ò–©–ï–ù–´" },
            zh: { t: "Ë°®ÊÉÖÁ¨¶Âè∑Êï∞Â≠¶ÁªÉ‰π†", n: "ÂßìÂêç:", c: "Áè≠Á∫ß:", f: "¬© 2026 ‰ºòË¥®ÂÑøÁ´•ÂÜÖÂÆπ ‚Ä¢ ÁâàÊùÉÊâÄÊúâ" },
            ja: { t: "„Åà„ÇÇ„ÅòÁÆóÊï∞„Éâ„É™„É´", n: "„Å™„Åæ„Åà:", c: "„Åè„Çâ„Åô:", f: "¬© 2026 „Éó„É¨„Éü„Ç¢„É†„Ç≠„ÉÉ„Ç∫„Éë„Ç∫„É´" },
            ko: { t: "Ïù¥Î™®ÏßÄ ÏàòÌïô Ïó∞Ïäµ", n: "Ïù¥Î¶Ñ:", c: "Î∞ò:", f: "¬© 2026 ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÇ§Ï¶à ÏΩòÌÖêÏ∏†" },
            ar: { t: "ÿ™ŸÖÿßÿ±ŸäŸÜ ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿßÿ™", n: "ÿßŸÑÿßÿ≥ŸÖ:", c: "ÿßŸÑŸÅÿµŸÑ:", f: "¬© 2026 ŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ™ŸÖŸäÿ≤" },
            hi: { t: "‡§á‡§Æ‡•ã‡§ú‡•Ä ‡§ó‡§£‡§ø‡§§ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏", n: "‡§®‡§æ‡§Æ:", c: "‡§ï‡§ï‡•ç‡§∑‡§æ:", f: "¬© 2026 ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§ï‡§ø‡§°‡•ç‡§∏ ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü" },
            id: { t: "Latihan Matematika Emoji", n: "NAMA:", c: "KELAS:", f: "¬© 2026 KONTEN PREMIUM ‚Ä¢ SIAP PLR" },
            tr: { t: "Emoji Matematik Alƒ±≈ütƒ±rmasƒ±", n: "ƒ∞Sƒ∞M:", c: "SINIF:", f: "¬© 2026 PREMƒ∞UM ƒ∞√áERƒ∞K" },
            vi: { t: "Luy·ªán T·∫≠p To√°n Emoji", n: "T√äN:", c: "L·ªöP:", f: "¬© 2026 N·ªòI DUNG CAO C·∫§P" },
            nl: { t: "Emoji Rekenoefening", n: "NAAM:", c: "KLAS:", f: "¬© 2026 PREMIUM CONTENT" }
        };

        const themes = {
            sports: ["‚öΩ", "üèÄ", "üéæ", "‚öæ", "üèê"],
            school: ["üé®", "‚úèÔ∏è", "üìö", "üìè", "üéí"],
            home: ["üè†", "üõãÔ∏è", "üß∏", "üì∫", "üõå"],
            plants: ["üåµ", "üå∏", "üåª", "üçÑ", "üåø"],
            wild: ["ü¶Å", "üêØ", "üêò", "ü¶í", "ü¶ì"],
            space: ["üöÄ", "ü™ê", "‚≠ê", "üõ∞Ô∏è", "‚òÑÔ∏è"], 
            food: ["üçé", "üçï", "üç¶", "üçî", "üçì"]
        };

        function applyLang() {
            const l = document.getElementById('langSelect').value;
            const d = langs[l];
            document.getElementById('inTitle').value = d.t;
            document.getElementById('inName').value = d.n;
            document.getElementById('inClass').value = d.c;
            document.getElementById('inFooter').value = d.f;
            sync();
            const ws = document.getElementById('ws');
            l === 'ar' ? ws.classList.add('rtl') : ws.classList.remove('rtl');
        }

        const sync = () => {
            document.getElementById('outTitle').innerText = document.getElementById('inTitle').value;
            document.getElementById('outName').innerText = document.getElementById('inName').value + " _________________";
            document.getElementById('outClass').innerText = document.getElementById('inClass').value + " _________________";
            document.getElementById('outFooter').innerText = document.getElementById('inFooter').value;
        };

        ['inTitle', 'inName', 'inClass', 'inFooter'].forEach(id => {
            document.getElementById(id).oninput = sync;
        });

        function applyZoom() {
            const val = document.getElementById('emojiZoom').value;
            document.documentElement.style.setProperty('--emoji-size', val);
        }

        function generate() {
            const count = parseInt(document.getElementById('qCount').value);
            const range = parseInt(document.getElementById('numRange').value);
            const mode = document.getElementById('mathMode').value;
            const theme = themes[document.getElementById('themeSelect').value];
            const custom = document.getElementById('customEmoji').value.trim();
            const list = document.getElementById('qList');
            list.innerHTML = '';

            for (let i = 1; i <= count; i++) {
                let n1 = Math.floor(Math.random() * range) + 1;
                let n2 = Math.floor(Math.random() * range) + 1;
                let op = mode;
                
                if (mode === 'mixed') op = Math.random() > 0.5 ? 'add' : 'sub';
                if (op === 'sub' && n1 < n2) [n1, n2] = [n2, n1]; 

                const emoji = custom || theme[Math.floor(Math.random() * theme.length)];
                const result = op === 'add' ? n1 + n2 : n1 - n2;

                const card = document.createElement('div');
                card.className = 'q-card';
                card.innerHTML = `
                    <div class="q-num">${i}</div>
                    <div class="math-row">
                        <div class="emoji-group">${Array(n1).fill(`<span class="emoji-item">${emoji}</span>`).join('')}</div>
                        <div class="op-text">${op === 'add' ? '+' : '-'}</div>
                        <div class="emoji-group">${Array(n2).fill(`<span class="emoji-item">${emoji}</span>`).join('')}</div>
                        <div class="op-text">=</div>
                        <div class="ans-box"><span class="ans-val">${result}</span></div>
                    </div>
                `;
                list.appendChild(card);
            }
        }

        window.onload = () => {
            applyLang();
            applyZoom();
            generate();
        };
    </script>
	<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
function saveAsImage() {
    const target = document.getElementById("ws");

    html2canvas(target, {
        scale: 2,
        useCORS: true,
        backgroundColor: "#ffffff"
    }).then(canvas => {
        const link = document.createElement("a");
        link.download = "emoji-math-worksheet.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
    });
}
</script>

</body>
</html>